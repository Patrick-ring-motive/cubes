<svg width="700" height="700"
     viewBox="-100 -100 700 700"
     xmlns="http://www.w3.org/2000/svg">

  <style>
    .cube {
      cursor: pointer;
      --base: #8fb3a2;
      --outline: rgba(0,0,0,0.35);
    }
    .face {
      stroke: var(--outline);
      stroke-width:1;
      stroke-linejoin:round;
      vector-effect: non-scaling-stroke;
    }
  </style>

  <!-- Brightness filters for faces -->
  <defs>
    <filter id="bright-top">
      <feComponentTransfer>
        <feFuncR type="linear" slope="1.15"/>
        <feFuncG type="linear" slope="1.15"/>
        <feFuncB type="linear" slope="1.15"/>
      </feComponentTransfer>
    </filter>

    <filter id="bright-left">
      <feComponentTransfer>
        <feFuncR type="linear" slope="0.95"/>
        <feFuncG type="linear" slope="0.95"/>
        <feFuncB type="linear" slope="0.95"/>
      </feComponentTransfer>
    </filter>

    <filter id="bright-right">
      <feComponentTransfer>
        <feFuncR type="linear" slope="0.8"/>
        <feFuncG type="linear" slope="0.8"/>
        <feFuncB type="linear" slope="0.8"/>
      </feComponentTransfer>
    </filter>
  </defs>

  <g id="cubes" class="cube">
    <script type="application/ecmascript"><![CDATA[
      const tileW = 64;
      const tileH = 32;
      const originX = 300;
      const originY = 50;
      const levelHeight = 32;
      const size = 5;

      const svgNS = "http://www.w3.org/2000/svg";
      const parent = document.currentScript.parentNode;

      for (let z=0; z<size; z++){
        for (let y=0; y<size; y++){
          for (let x=0; x<size; x++){
            const sx = Math.round(originX + (x - y) * (tileW/2));
            const sy = Math.round(originY + (x + y) * (tileH/2) - z * levelHeight);

            const g = document.createElementNS(svgNS,"g");
            g.setAttribute("transform", `translate(${sx}, ${sy})`);

            // Apply depth filters
            const sat = 1 + x*0.5;  // saturation by X
            const cont = 1 + y*0.5; // contrast by Y
            const hue = z*30;         // hue-rotate by Z
            g.setAttribute("style", `filter: saturate(${sat}) contrast(${cont}) hue-rotate(${hue}deg)`);

            // Top face
            const top = document.createElementNS(svgNS,"polygon");
            top.setAttribute("class","face");
            top.setAttribute("points","64 16,96 32,64 48,32 32");
            top.setAttribute("fill","#8fb3a2");
            top.setAttribute("filter","url(#bright-top)");
            g.appendChild(top);

            // Left face
            const left = document.createElementNS(svgNS,"polygon");
            left.setAttribute("class","face");
            left.setAttribute("points","32 32,64 48,64 80,32 64");
            left.setAttribute("fill","#8fb3a2");
            left.setAttribute("filter","url(#bright-left)");
            g.appendChild(left);

            // Right face
            const right = document.createElementNS(svgNS,"polygon");
            right.setAttribute("class","face");
            right.setAttribute("points","96 32,64 48,64 80,96 64 80");
            right.setAttribute("fill","#8fb3a2");
            right.setAttribute("filter","url(#bright-right)");
            g.appendChild(right);

            // Click to remove
            g.addEventListener("click", () => g.remove());

            parent.appendChild(g);
          }
        }
      }
    ]]></script>
  </g>
</svg>
